[JWT(암호화)]
- 링크: https://www.jwt.io/
  - Header/Payload/Signature 순서대로 '.'으로 구분됨
- 링크: https://www.jwt.io/libraries?programming_language=python
  - python 암호화
  - /python-jose 설치 `uv add python-jose`

[OAuth 2.0]
- 링크 : https://oauth.net/2/
- 추가 설명: https://chatgpt.com/s/t_697adc4a048881919de85bb603c5bb6b https://oauth.net/2/


```
@app.post("/token") # 토큰 만들고 fastapi 페이지에서 발행된 토큰을 jwt.io 가서 JSON Header에 alg, typ 잘 뜨나 확인
def token(): # 이거는 인증 부분 (인가 부분도 만들어야 함)
  try :
    iat = datetime.now(timezone.utc) + (timedelta(hours=7))
    exp = iat + (timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUES))
    data = {
      "name" : "test",
      "iss" : "EDU", 
      "sub" : str(1), 
      "iat": iat,
      "exp": exp
    }
    result = jwt.encode(data, SECRET_KEY, algorithm=ALGORITHM)
    return {"Status": True, "token": result}
  except JWTError as e:
    print(f"JWT ERROR : {e}")
  return {"Status": False}
```

```
from datetime import datetime, timedelta, timezone # 토큰은 유효기간이 있어서 이걸 설정해줘야 함
from jose import jwt, JWTError # 토큰 발행 (pyproject.toml 에서 깔렸나 확인)

SECRET_KEY = "your-extremely-secure-random-secret-key" # 짧으면 안돼서 최소길이 32자임
ALGORITHM = "HS256" 
ACCESS_TOKEN_EXPIRE_MINUES = 30

def set_token(sub: int):
  try :
    iat = datetime.now(timezone.utc) + (timedelta(hours=7))
    exp = iat + (timedelta(minutes=ACCESS_TOKEN_EXPIRE_MINUES))
    data = {
      "name" : "test",
      "iss" : "EDU", 
      "sub" : str(sub), 
      "iat": iat,
      "exp": exp
    }
    result = jwt.encode(data, SECRET_KEY, algorithm=ALGORITHM)
    return {"Status": True, "token": result}
  except JWTError as e:
    print(f"JWT ERROR : {e}")
  return None
```
